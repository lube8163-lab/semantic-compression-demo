<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Semantic Compression Demo</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    #timeline { margin-top: 20px; }
    .post { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    img { max-width: 100%; height: auto; }
  </style>
</head>
<body>
  <h1>AI圧縮SNSデモ</h1>

  <!-- 投稿フォーム -->
  <form id="postForm">
    <input type="file" id="imageInput" accept="image/*"><br><br>
    <textarea id="captionInput" placeholder="キャプションを書いてね" rows="2" cols="30"></textarea><br><br>
    <button type="submit">投稿する</button>
  </form>

  <!-- タイムライン -->
  <div id="timeline"></div>

  <script>
    const form = document.getElementById('postForm');
    const timeline = document.getElementById('timeline');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const caption = document.getElementById('captionInput').value;
      const file = document.getElementById('imageInput').files[0];

      if (!file) {
        alert("画像を選んでね！");
        return;
      }

      const reader = new FileReader();
      reader.onload = function(event) {
        const post = document.createElement('div');
        post.className = 'post';
        post.innerHTML = `
          <p><b>キャプション:</b> ${caption}</p>
          <img src="${event.target.result}" alt="投稿画像">
        `;
        timeline.prepend(post); // 上に追加
      };
      reader.readAsDataURL(file);

      // 入力欄をリセット
      form.reset();
    });
  </script>
</body>
</html>
